import{j as e,r as c,d as x,U as h,S as b,B as G,J as v}from"./index-DqxhmwNT.js";import{T as k,a as w,b as N,c as t,d as C,e as l}from"./table-DFCVlvo9.js";import{L as E}from"./label-Ba-SXc1-.js";import{e as L}from"./card-BGXav7l3.js";import"./index-UgU33mmj.js";const I=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})});function J(){const[m,y]=c.useState(null),[s,S]=c.useState(null),[i,p]=c.useState(!1),d=c.useRef(null);c.useEffect(()=>{x.get(`${h}/grupovsturnos`).then(r=>{S(r.data)}).catch(r=>{console.log(r)})},[i]);const H=r=>{r.preventDefault();const o=r.currentTarget,n=o.grupoHorario.value,j=o.turno.value,g=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"].filter(a=>o[a].checked).map(a=>a[0].toUpperCase()+a.slice(1));if(!n||!j||!g.length){alert("Debe seleccionar grupo, turno y al menos un día");return}x.post(`${h}/creategpvstur`,{grupoHorario:n,turno:j,dias:g}).then(a=>{var f;a.status===201&&(p(!i),(f=d.current)==null||f.reset(),v.success("Asignación De Turno Exitosa",{description:"Se ha asignado el turno correctamente"}))}).catch(a=>{console.log(a)})},T=r=>{x.delete(`${h}/grupovsturnos/${r}`).then(o=>{var n;o.status===200&&(p(!i),v.success("Eliminación Exitosa",{description:"Se ha eliminado el turno correctamente"}),(n=d.current)==null||n.reset())}).catch(o=>{console.log(o)})},D=r=>{const o=Number(r.target.value);y(o)},u=m?s==null?void 0:s.asignados.filter(r=>r.GrupoHorario.id===m):s==null?void 0:s.asignados;return e.jsxs("section",{className:"flex flex-col h-screen",children:[e.jsx("h1",{className:"text-2xl text-center text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Asignación Turnos - Grupos"}),e.jsxs(L,{className:"flex gap-2",children:[e.jsxs("section",{className:"flex flex-col gap-2 justify-center px-2",children:[e.jsx(E,{className:"text-center",children:"Filtrar Grupos"}),e.jsxs("select",{onChange:D,className:"border px-4 py-2 rounded-md",children:[e.jsx("option",{value:"",children:"Seleccione Grupo"}),s==null?void 0:s.grupoHorario.map(r=>e.jsx("option",{value:r.id,children:r.descripcion},r.id))]})]}),e.jsx(b,{orientation:"vertical"}),e.jsxs("form",{ref:d,onSubmit:H,className:"flex gap-2",children:[e.jsxs("section",{className:"flex flex-col gap-2 justify-center",children:[e.jsxs("select",{name:"grupoHorario",id:"grupoHorario",className:"border px-4 py-2 rounded-md",children:[e.jsx("option",{value:"",children:"Seleccione Grupo"}),s==null?void 0:s.grupoHorario.map(r=>e.jsx("option",{value:r.id,children:r.descripcion},r.id))]}),e.jsxs("select",{name:"turno",id:"turno",className:"border px-4 py-2 rounded-md",children:[e.jsx("option",{value:"",children:"Seleccione Turno"}),s==null?void 0:s.horario.map(r=>e.jsx("option",{value:r.id,children:r.descripcion},r.id))]})]}),e.jsx("fieldset",{className:"grid grid-cols-4 py-4 gap-2",children:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"].map(r=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:r,id:r,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:r,className:"ml-2 block text-sm text-gray-700",children:r})]},r))}),e.jsxs("button",{type:"submit",className:"my-10 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex gap-1",children:[e.jsx("span",{children:"Agregar"}),e.jsx(I,{})]})]})]}),e.jsx(b,{}),e.jsx("section",{className:"h-[80vh] overflow-y-auto",children:e.jsxs(k,{children:[e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"Día"}),e.jsx(t,{children:"Grupo Horario"}),e.jsx(t,{children:"Turno"}),e.jsx(t,{children:"Acciones"})]})}),e.jsx(C,{children:u==null?void 0:u.map(r=>e.jsxs(N,{children:[e.jsx(l,{children:r.id}),e.jsx(l,{children:r.diaSeman}),e.jsx(l,{children:r.GrupoHorario.descripcion}),e.jsx(l,{children:r.Turno.descripcion}),e.jsx(l,{children:e.jsx(G,{className:"hover:bg-red-200",variant:"secondary",onClick:()=>T(r.id),children:"Eliminar"})})]},r.id))})]})})]})}export{J as default};
