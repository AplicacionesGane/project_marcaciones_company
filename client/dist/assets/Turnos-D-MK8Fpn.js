import{r as t,d as x,U as u,j as e,S,B as g,I as a,J as h}from"./index-ByYEY0NG.js";import{T as q,a as C,b as T,c as i,d as R,e as s}from"./table-CUBcxQuQ.js";import{M as v}from"./ModalDelete-BFnTJxqY.js";import{L as n}from"./label-bYpcweDo.js";import{e as w}from"./card-CtS-igbm.js";import"./WarningIcons-D3b4nccH.js";import"./index-DKJkQS74.js";function U(){const[y,H]=t.useState([]),j=t.useRef(null),[E,m]=t.useState(!1),[p,f]=t.useState(null),[B,_]=t.useState(!1);t.useEffect(()=>{x.get(`${u}/turnos`).then(r=>{H(r.data),m(!1)}).catch(r=>{console.log(r)})},[E]);const I=r=>{r.preventDefault();const o=Object.fromEntries(new window.FormData(r.target)),l={codigo:o.codigo,descripcion:o.nombre_turno,hora_inicio:o.hora_inicio,hora_fin:o.hora_fin,teorico:o.teorico,hora_inicio_break:o.hora_inicio_break,hora_fin_break:o.hora_fin_break,tiempo_breack:o.tiempo_breack,conceptos:o.conceptos};x.post(`${u}/turno`,l).then(d=>{var c;d.status===201&&(h.success("El turno se creó correctamente",{description:"Turno creado"}),m(!0),(c=j.current)==null||c.reset())}).catch(d=>{var c,k;console.log(d),h.error(((k=(c=d.response)==null?void 0:c.data)==null?void 0:k.message)||"Error",{description:"Error al crear el turno"})})},D=()=>{p!==null&&x.delete(`${u}/turno/${p}`).then(r=>{r.status===200&&(h.success("El cargo se eliminó correctamente",{description:"turno eliminado"}),m(!0))}).catch(r=>{var o,l;console.log(r),h.error(((l=(o=r.response)==null?void 0:o.data)==null?void 0:l.message)||"Error",{description:"Error al eliminar el turno"})}).finally(()=>{b()})},N=r=>{f(r),_(!0)},b=()=>{_(!1),f(null)};return e.jsxs("section",{className:"p-1 flex flex-col h-screen",children:[e.jsx("h1",{className:"text-2xl text-center text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Gestionar Horarios Laborales"}),e.jsx(S,{}),e.jsx("section",{className:"h-[80vh] overflow-y-auto",children:e.jsxs(q,{children:[e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(i,{children:"Código"}),e.jsx(i,{children:"Nombre turno"}),e.jsx(i,{children:"Horas Total Día"}),e.jsx(i,{children:"Hora Inicio"}),e.jsx(i,{children:"Hora Fin"}),e.jsx(i,{children:"Hora Inicio Break"}),e.jsx(i,{children:"Hora Final Break"}),e.jsx(i,{children:"Tiempo Breack"}),e.jsx(i,{children:"Acciones"})]})}),e.jsx(R,{children:y.map(r=>e.jsxs(T,{children:[e.jsx(s,{children:r.codigo}),e.jsx(s,{children:r.descripcion}),e.jsxs(s,{children:[r.teorico.split(":",1)," h"]}),e.jsx(s,{children:r.hora_inicio}),e.jsx(s,{children:r.hora_fin}),e.jsx(s,{children:r.hora_inicio_break}),e.jsx(s,{children:r.hora_fin_break}),e.jsx(s,{children:r.tiempo_breack}),e.jsx(s,{children:e.jsx(g,{className:"hover:bg-red-200",variant:"secondary",onClick:()=>N(r.id),children:"Eliminar"})})]},r.id))})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("form",{ref:j,onSubmit:r=>I(r),className:"grid grid-cols-6 place-content-center place-items-center gap-2",children:[e.jsx(n,{children:"Codigo"}),e.jsx(a,{type:"text",name:"codigo",id:"codigo",required:!0}),e.jsx(n,{children:"Nombre Turno"}),e.jsx(a,{type:"text",name:"nombre_turno",id:"nombre_turno",required:!0}),e.jsx(n,{children:"Hora Inicio turno"}),e.jsx(a,{type:"time",name:"hora_inicio",id:"hora_inicio",required:!0}),e.jsx(n,{children:"Hora Fin turno"}),e.jsx(a,{type:"time",name:"hora_fin",id:"hora_fin",required:!0}),e.jsx(n,{children:"Horas Total Día"}),e.jsx(a,{type:"text",name:"teorico",id:"teorico",required:!0}),e.jsx(n,{children:"Hora Inicio Break"}),e.jsx(a,{type:"time",name:"hora_inicio_break",id:"hora_inicio_break"}),e.jsx(n,{children:"Hora Final Break"}),e.jsx(a,{type:"time",name:"hora_fin_break",id:"hora_fin_break"}),e.jsx(n,{children:"Tiempo Break"}),e.jsx(a,{type:"text",name:"tiempo_breack",id:"tiempo_breack"}),e.jsx(g,{type:"submit",children:"Crear Turno"})]})}),B&&e.jsx(v,{funAction:D,onCancel:b})]})}export{U as default};
