import{r,d,U as m,j as e,S as O,B as o,I as y,J as t}from"./index-DqxhmwNT.js";import{T as B,a as H,b as C,c as h,d as L,e as g}from"./table-DFCVlvo9.js";import{M as G}from"./ModalDelete-B09Nnbh8.js";import{L as A}from"./label-Ba-SXc1-.js";import{e as J}from"./card-BGXav7l3.js";import"./WarningIcons-8wwvLZAV.js";import"./index-UgU33mmj.js";function X(){const[E,w]=r.useState([]),[f,b]=r.useState(null),[S,u]=r.useState(!1),[T,j]=r.useState(0),[p,l]=r.useState(""),[x,c]=r.useState(""),[k,n]=r.useState(!1),[D,N]=r.useState(!1);r.useEffect(()=>{d.get(`${m}/areas`).then(a=>{w(a.data),n(!1)}).catch(a=>{console.log(a)})},[k]);const I=a=>{a.preventDefault(),d.post(`${m}/area`,{codigo:p,descripcion:x}).then(s=>{console.log(s.data),s.status===201&&(t.success("El área se creo correctamente",{description:"Área creada"}),l(""),c(""),n(!0))}).catch(s=>{console.log(s),t.error(s.response.data.message||"Error ",{description:"Error al crear el área"})})},U=a=>{a.preventDefault(),d.put(`${m}/updatearea`,{id:T,codigo:p,nombre:x}).then(s=>{s.status===200&&(t.success("El área se actualizó correctamente",{description:"Área actualizada"}),l(""),c(""),n(!0),u(!1))}).catch(s=>{console.log(s),t.error(s.response.data.message||"Error ",{description:"Error al actualizar el área"})})},M=()=>{f!==null&&d.delete(`${m}/area/${f}`).then(a=>{a.status===200&&(t.success("El área se eliminó correctamente",{description:"Área eliminada"}),n(!0))}).catch(a=>{var s,i;console.log(a),t.error(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"Error",{description:"Error al eliminar el área"})}).finally(()=>{v()})},R=a=>{b(a),N(!0)},v=()=>{N(!1),b(null)},$=a=>{const{id:s,codigo:i,descripcion:z}=a;c(z),u(!0),l(i),j(s)},q=()=>{u(!1),j(0),l(""),c("")};return e.jsxs("section",{className:"flex flex-col h-screen",children:[e.jsx("h1",{className:"text-2xl text-center text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Gestionar Áreas"}),e.jsx(O,{}),e.jsx("section",{className:"h-[80vh] overflow-y-auto",children:e.jsxs(B,{children:[e.jsx(H,{children:e.jsxs(C,{children:[e.jsx(h,{children:"CODIGO"}),e.jsx(h,{children:"Nombre área"}),e.jsx(h,{children:"Acciones"})]})}),e.jsx(L,{children:E.map(a=>e.jsxs(C,{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700  ",children:[e.jsx(g,{className:"px-4 py-2",children:a.codigo}),e.jsx(g,{className:"px-4 py-2",children:a.descripcion}),e.jsxs(g,{className:"px-4 py-2 flex gap-2",children:[e.jsx(o,{className:"hover:bg-yellow-100",variant:"secondary",onClick:()=>$(a),children:"Editar"}),e.jsx(o,{className:"hover:bg-red-200",variant:"secondary",onClick:()=>R(a.id),children:"Eliminar"})]})]},a.id))})]})}),e.jsx(J,{className:"p-4 m-1 mt-auto",children:e.jsxs("form",{className:"flex items-center gap-2 w-full",children:[e.jsx(A,{className:"min-w-12",children:"Código:"}),e.jsx(y,{type:"text",value:p,onChange:a=>l(a.target.value),className:"w-40",placeholder:"01, 24, 56 ...",required:!0}),e.jsx(A,{className:"min-w-24",children:"Nombre del área:"}),e.jsx(y,{type:"text",value:x,onChange:a=>c(a.target.value),className:"w-72 2xl:w-96",placeholder:"Administración, Contabilidad, Recursos Humanos ...",required:!0}),S?e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(o,{onClick:()=>q(),className:"bg-red-500 hover:bg-red-600",children:"Cancelar"}),e.jsx(o,{type:"submit",onClick:U,className:"bg-green-500 hover:bg-green-600",children:"Actualizar"})]}):e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:e.jsx(o,{type:"submit",onClick:I,className:"bg-blue-500 hover:bg-blue-600",children:"Crear Área"})})]})}),D&&e.jsx(G,{funAction:M,onCancel:v})]})}export{X as default};
