import{r,d,U as m,j as e,S as R,B as l,I as v,J as t}from"./index-ByYEY0NG.js";import{T as B,a as J,b as y,c as x,d as L,e as h}from"./table-CUBcxQuQ.js";import{M as G}from"./ModalDelete-BFnTJxqY.js";import{L as E}from"./label-bYpcweDo.js";import{e as H}from"./card-CtS-igbm.js";import"./WarningIcons-D3b4nccH.js";import"./index-DKJkQS74.js";function X(){const[w,D]=r.useState([]),[f,j]=r.useState(null),[I,u]=r.useState(!1),[S,n]=r.useState(!1),[T,b]=r.useState(0),[g,o]=r.useState(""),[p,c]=r.useState(""),[A,C]=r.useState(!1);r.useEffect(()=>{d.get(`${m}/cargos`).then(a=>{D(a.data),n(!1)}).catch(a=>{console.log(a)})},[S]);const k=a=>{a.preventDefault(),d.post(`${m}/cargo`,{codigo:g,descripcion:p}).then(s=>{console.log(s.data),s.status===201&&(t.success("El cargo se creo correctamente",{description:"cargo creada"}),o(""),c(""),n(!0))}).catch(s=>{console.log(s),t.error(s.response.data.message||"Error ",{description:"Error al crear el cargo"})})},U=a=>{a.preventDefault(),d.put(`${m}/updatecargo`,{id:T,codigo:g,nombre:p}).then(s=>{s.status===200&&(t.success("El área se actualizó correctamente",{description:"Área actualizada"}),o(""),c(""),n(!0),u(!1))}).catch(s=>{console.log(s),t.error(s.response.data.message||"Error ",{description:"Error al actualizar el área"})})},M=()=>{f!==null&&d.delete(`${m}/cargo/${f}`).then(a=>{a.status===200&&(t.success("El cargo se eliminó correctamente",{description:"cargo eliminada"}),n(!0))}).catch(a=>{var s,i;console.log(a),t.error(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"Error",{description:"Error al eliminar el cargo"})}).finally(()=>{N()})},$=a=>{j(a),C(!0)},N=()=>{C(!1),j(null)},q=a=>{const{ID:s,codigo:i,descripcion:O}=a;u(!0),b(s),o(i),c(O)},z=()=>{u(!1),b(0),o(""),c("")};return e.jsxs("section",{className:"flex flex-col h-screen",children:[e.jsx("h1",{className:"text-2xl text-center text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Gestionar Cargos"}),e.jsx(R,{}),e.jsx("div",{className:"h-[80vh] overflow-y-auto",children:e.jsxs(B,{children:[e.jsx(J,{children:e.jsxs(y,{children:[e.jsx(x,{children:"CODIGO"}),e.jsx(x,{children:"Nombre Cargo"}),e.jsx(x,{children:"Acciones"})]})}),e.jsx(L,{children:w.map(a=>e.jsxs(y,{children:[e.jsx(h,{className:"px-4 py-2",children:a.codigo}),e.jsx(h,{className:"px-4 py-2",children:a.descripcion}),e.jsxs(h,{className:"px-4 py-2 flex gap-2",children:[e.jsx(l,{className:"hover:bg-yellow-100",variant:"secondary",onClick:()=>q(a),children:"Editar"}),e.jsx(l,{className:"hover:bg-red-200",variant:"secondary",onClick:()=>$(a.ID),children:"Eliminar"})]})]},a.ID))})]})}),e.jsx(H,{className:"p-4 m-1 mt-auto",children:e.jsxs("form",{className:"flex items-center gap-2 w-full",children:[e.jsx(E,{className:"min-w-12",children:"Código"}),e.jsx(v,{type:"text",className:"w-40",placeholder:"01, 12, 35 ...",value:g,onChange:a=>o(a.target.value),required:!0}),e.jsx(E,{className:"min-w-24",children:"Nombre Cargo"}),e.jsx(v,{type:"text",className:"w-72 2xl:w-96",placeholder:"Técnico, Analista, Asistente, Jefe ...",value:p,onChange:a=>c(a.target.value),required:!0}),I?e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(l,{onClick:()=>z(),className:"bg-red-500 hover:bg-red-600",children:"Cancelar"}),e.jsx(l,{type:"submit",onClick:U,className:"bg-green-500 hover:bg-green-600",children:"Actualizar"})]}):e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:e.jsx(l,{type:"submit",onClick:k,className:"bg-blue-500 hover:bg-blue-600",children:"Crear Área"})})]})}),A&&e.jsx(G,{funAction:M,onCancel:N})]})}export{X as default};
